---
description: Quy trÃ¬nh táº¡o Ä‘a ngÃ´n ngá»¯ cho dá»± Ã¡n Laravel + Inertia.js + React (CLICKAI)
---

# Quy TrÃ¬nh Táº¡o Äa NgÃ´n Ngá»¯

## Tech Stack
- **i18n**: react-i18next (front-end)
- **Translations**: JSON files (`resources/lang/vi.json`, `resources/lang/en.json`)
- **Language Switcher**: Component `LanguageSwitcher.jsx`
- **Cookie sync**: Laravel backend Ä‘á»c cookie `locale`

## Cáº¥u TrÃºc ThÆ° Má»¥c
```
laravel-backend/
â”œâ”€â”€ resources/
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â”œâ”€â”€ i18n.js                    # Cáº¥u hÃ¬nh i18next
â”‚   â”‚   â”œâ”€â”€ Components/
â”‚   â”‚   â”‚   â””â”€â”€ LanguageSwitcher.jsx   # Component chuyá»ƒn ngÃ´n ngá»¯
â”‚   â”‚   â””â”€â”€ Pages/                     # Pages sá»­ dá»¥ng useTranslation()
â”‚   â””â”€â”€ lang/
â”‚       â”œâ”€â”€ vi.json                    # Báº£n dá»‹ch Tiáº¿ng Viá»‡t
â”‚       â””â”€â”€ en.json                    # Báº£n dá»‹ch Tiáº¿ng Anh
```

## NgÃ´n Ngá»¯ Há»— Trá»£
| Code | NgÃ´n ngá»¯ | Máº·c Ä‘á»‹nh |
|------|----------|----------|
| `vi` | Tiáº¿ng Viá»‡t | âœ… |
| `en` | English | |

## Cáº¥u TrÃºc Translation Key

```json
{
    "module": {
        "subkey": "Text hiá»ƒn thá»‹",
        "nested": {
            "deep_key": "Text lá»“ng sÃ¢u"
        }
    }
}
```

**Quy táº¯c Ä‘áº·t tÃªn key:**
- DÃ¹ng `snake_case` cho keys
- NhÃ³m theo module/page: `dashboard.`, `devices.`, `auth.`, `common.`
- Keys chung Ä‘áº·t trong `common.`: `common.save`, `common.cancel`

## CÃ¡c BÆ°á»›c ThÃªm Text Má»›i

### BÆ°á»›c 1: ThÃªm key vÃ o `vi.json`
```json
// resources/lang/vi.json
{
    "module_name": {
        "new_key": "VÄƒn báº£n tiáº¿ng Viá»‡t",
        "with_variable": "Xin chÃ o, {{name}}!"
    }
}
```

### BÆ°á»›c 2: ThÃªm key tÆ°Æ¡ng á»©ng vÃ o `en.json`
```json
// resources/lang/en.json
{
    "module_name": {
        "new_key": "English text",
        "with_variable": "Hello, {{name}}!"
    }
}
```

### BÆ°á»›c 3: Sá»­ dá»¥ng trong Component
```jsx
import { useTranslation } from 'react-i18next';

export default function MyComponent() {
    const { t } = useTranslation();

    return (
        <div>
            {/* Text Ä‘Æ¡n giáº£n */}
            <h1>{t('module_name.new_key')}</h1>
            
            {/* Text cÃ³ biáº¿n */}
            <p>{t('module_name.with_variable', { name: 'John' })}</p>
            
            {/* Fallback náº¿u key khÃ´ng tá»“n táº¡i */}
            <span>{t('module_name.missing', 'Default text')}</span>
        </div>
    );
}
```

## CÃ¡c Modules Hiá»‡n CÃ³

| Module | Prefix Key | MÃ´ táº£ |
|--------|------------|-------|
| Common | `common.` | CÃ¡c text dÃ¹ng chung: save, cancel, delete... |
| Dashboard | `dashboard.` | Báº£ng Ä‘iá»u khiá»ƒn |
| Auth | `auth.` | ÄÄƒng nháº­p, Ä‘Äƒng kÃ½ |
| Devices | `devices.` | Quáº£n lÃ½ thiáº¿t bá»‹ |
| Flows | `flows.` | Workflows |
| Data Collections | `data_collections.` | Bá»™ sÆ°u táº­p dá»¯ liá»‡u |
| Packages | `packages.` | GÃ³i dá»‹ch vá»¥ |
| Media | `media.` | ThÆ° viá»‡n media |
| AI Studio | `ai_studio.` | CÃ´ng cá»¥ AI |
| Jobs | `jobs.` | CÃ´ng viá»‡c |
| Landing | `landing.` | Trang chá»§ |
| Features | `features.` | Trang tÃ­nh nÄƒng |
| About | `about.` | Giá»›i thiá»‡u |
| Contact | `contact.` | LiÃªn há»‡ |
| Navigation | `navigation.` | Menu Ä‘iá»u hÆ°á»›ng |
| Notifications | `notifications.` | ThÃ´ng bÃ¡o |

## Interpolation (Biáº¿n trong text)

```jsx
// CÃº phÃ¡p: {{variableName}}
// vi.json: "welcome": "ChÃ o má»«ng {{name}}!"
// en.json: "welcome": "Welcome {{name}}!"

t('welcome', { name: user.name })
// Output (vi): "ChÃ o má»«ng John!"
// Output (en): "Welcome John!"
```

## Pluralization (Sá»‘ nhiá»u)

```json
// vi.json
{
    "items": {
        "count_one": "{{count}} váº­t pháº©m",
        "count_other": "{{count}} váº­t pháº©m"
    }
}

// en.json
{
    "items": {
        "count_one": "{{count}} item",
        "count_other": "{{count}} items"
    }
}
```

```jsx
t('items.count', { count: 1 })  // "1 item" / "1 váº­t pháº©m"
t('items.count', { count: 5 })  // "5 items" / "5 váº­t pháº©m"
```

## Chuyá»ƒn NgÃ´n Ngá»¯

### Sá»­ dá»¥ng LanguageSwitcher Component
```jsx
import LanguageSwitcher from '@/Components/LanguageSwitcher';

// Trong component
<LanguageSwitcher />
```

### Chuyá»ƒn ngÃ´n ngá»¯ programmatically
```jsx
import { changeLanguage, getCurrentLanguage } from '@/i18n';

// Láº¥y ngÃ´n ngá»¯ hiá»‡n táº¡i
const currentLang = getCurrentLanguage(); // 'vi' hoáº·c 'en'

// Chuyá»ƒn ngÃ´n ngá»¯
changeLanguage('en'); // Chuyá»ƒn sang tiáº¿ng Anh
changeLanguage('vi'); // Chuyá»ƒn sang tiáº¿ng Viá»‡t
```

## Äá»“ng Bá»™ Vá»›i Laravel Backend

Cookie `locale` Ä‘Æ°á»£c tá»± Ä‘á»™ng set khi chuyá»ƒn ngÃ´n ngá»¯:
```js
document.cookie = `locale=${langCode};path=/;max-age=${60 * 60 * 24 * 30}`;
```

Laravel middleware cÃ³ thá»ƒ Ä‘á»c cookie nÃ y Ä‘á»ƒ set `App::setLocale()`.

## ThÃªm NgÃ´n Ngá»¯ Má»›i

### BÆ°á»›c 1: Táº¡o file translation
```bash
# Táº¡o file má»›i dá»±a trÃªn vi.json
cp resources/lang/vi.json resources/lang/ja.json
```

### BÆ°á»›c 2: Cáº­p nháº­t i18n.js
```js
// resources/js/i18n.js
import jaTranslations from '../lang/ja.json';

i18n.init({
    resources: {
        vi: { translation: viTranslations },
        en: { translation: enTranslations },
        ja: { translation: jaTranslations }  // ThÃªm má»›i
    },
    supportedLngs: ['vi', 'en', 'ja'],  // ThÃªm 'ja'
    // ...
});
```

### BÆ°á»›c 3: Cáº­p nháº­t LanguageSwitcher.jsx
```jsx
const languages = [
    { code: 'vi', name: 'Tiáº¿ng Viá»‡t', flag: 'ğŸ‡»ğŸ‡³' },
    { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
    { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },  // ThÃªm má»›i
];
```

## Checklist Khi ThÃªm Text Má»›i
- [ ] ThÃªm key vÃ o `vi.json` (tiáº¿ng Viá»‡t lÃ  máº·c Ä‘á»‹nh)
- [ ] ThÃªm key tÆ°Æ¡ng á»©ng vÃ o `en.json`
- [ ] Sá»­ dá»¥ng `t('key')` thay vÃ¬ hardcode text
- [ ] Test cáº£ 2 ngÃ´n ngá»¯
- [ ] Äáº£m báº£o khÃ´ng cÃ³ text hardcode trong component

## KhÃ´ng LÃ m
- âŒ Hardcode text trá»±c tiáº¿p trong component
- âŒ QuÃªn Ä‘á»“ng bá»™ keys giá»¯a vi.json vÃ  en.json
- âŒ Äáº·t key khÃ´ng theo convention (dÃ¹ng camelCase thay vÃ¬ snake_case)
- âŒ Dá»‹ch sai ngá»¯ cáº£nh (dá»‹ch mÃ¡y khÃ´ng review)

## Debug i18n

```js
// Báº­t debug mode trong development
// i18n.js Ä‘Ã£ cÃ³: debug: import.meta.env.DEV

// Console sáº½ log:
// - Khi key khÃ´ng tÃ¬m tháº¥y
// - Khi load translations
// - Khi chuyá»ƒn ngÃ´n ngá»¯
```

## Tham Kháº£o
- `resources/js/i18n.js` - Cáº¥u hÃ¬nh i18next
- `resources/js/Components/LanguageSwitcher.jsx` - Component chuyá»ƒn ngÃ´n ngá»¯
- `resources/lang/vi.json` - Template translation keys
- `Pages/Dashboard/Index.jsx` - VÃ­ dá»¥ sá»­ dá»¥ng useTranslation

// turbo-all
